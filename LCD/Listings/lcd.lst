C51 COMPILER V9.60.0.0   LCD                                                               11/29/2021 21:32:49 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN .\Objects\lcd.obj
COMPILER INVOKED BY: E:\Long\Keil5\C51\BIN\C51.EXE lcd.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\lc
                    -d.lst) TABS(2) OBJECT(.\Objects\lcd.obj)

line level    source

   1          #include <at89x51.h>
   2          #include "string.h"
   3          //Dinh nghia mot so chan de dieu khien den LCD
   4          #define LCD_DATA P0
   5          sbit EN=P2^7;
   6          sbit RS=P2^6;
   7          sbit RW=P2^5;    
   8          //Khai bao prototype cho cac ham
   9          void Init_System(); 
  10          void Delay_ms(int interval);  
  11          void LCD_init();
  12          void Wait_For_LCD();
  13          void LCD_Send_Command(unsigned char x);
  14          void LCD_Write_One_Char(unsigned char c);
  15          void LCD_Write_String(unsigned char *s);
  16          void main()
  17          {
  18   1        Init_System();
  19   1        LCD_init();
  20   1        LCD_Write_String("Xin chao KSTN 62");
  21   1        LCD_Send_Command(0xC0); //Chuyen con tro xuong dong thu 2
  22   1        LCD_Write_String("****************"); 
  23   1        while(1){   
  24   2        }
  25   1      }
  26          void Init_System()
  27          {
  28   1        //Thiet lap LCD o che do doc
  29   1        RW=1; 
  30   1      }
  31          void Delay_ms(int interval)
  32          {
  33   1        int i,j;
  34   1        for(i=0;i<1000;i++)
  35   1        {
  36   2          for(j=0;j<interval;j++);
  37   2        }
  38   1      }
  39          //Ham thuc hien gui mot lenh xuong LCD
  40          void LCD_Send_Command(unsigned char x)
  41          {
  42   1        LCD_DATA=x;
  43   1        RS=0; //Chon thanh ghi lenh
  44   1        RW=0; //De ghi du lieu
  45   1        EN=1;
  46   1        Delay_ms(1);
  47   1        EN=0;   
  48   1        Wait_For_LCD(); //Doi cho LCD san sang
  49   1        EN=1;     
  50   1      }
  51          //Ham khoi tao LCD o che do ghi
  52          //Ham kiem tra va cho den khi LCD san sang
  53          void Wait_For_LCD()
  54          {
C51 COMPILER V9.60.0.0   LCD                                                               11/29/2021 21:32:49 PAGE 2   

  55   1        //Delay_By_Timer_0(80);
  56   1        Delay_ms(1);
  57   1      }
  58          void LCD_init()
  59          {
  60   1        LCD_Send_Command(0x38); //Chon che do 8 bit, 2 hang cho LCD
  61   1        LCD_Send_Command(0x0E); //Bat hien thi, nhap nhay con tro 
  62   1        LCD_Send_Command(0x01); //Xoa man hinh  
  63   1        LCD_Send_Command(0x80); //Ve dau dong
  64   1        
  65   1      }
  66          //Ham de LCD hien thi mot ky tu
  67          void LCD_Write_One_Char(unsigned char c)
  68          {
  69   1        LCD_DATA=c; //Dua du lieu vao thanh ghi 
  70   1        RS=1; //Chon thanh ghi du lieu
  71   1        RW=0;
  72   1        EN=1;
  73   1        Delay_ms(1);  
  74   1        EN=0;
  75   1        Wait_For_LCD(); 
  76   1        EN=1;
  77   1      }
  78          //Ham de LCD hien thi mot xau
  79          void LCD_Write_String(unsigned char *s)
  80          {
  81   1        unsigned char length;
  82   1        length=strlen(s); //Lay do dai xau
  83   1        while(length!=0)
  84   1        {
  85   2          LCD_Write_One_Char(*s); //Ghi ra LCD gia tri duoc tro boi con tro
  86   2          s++; //Tang con tro
  87   2          length--;        
  88   2        }
  89   1      }
  90          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    176    ----
   CONSTANT SIZE    =     34    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
